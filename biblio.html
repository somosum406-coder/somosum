<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biblioteca Digital - Somos Um</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Fugaz+One&family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="public/modules/joao-ia/joao-ia.css" />
    <link
      rel="icon"
      type="image/x-icon"
      href="public/assets/img/icons/home.ico"
    />

    <style>
      /* ========== VARIÁVEIS E RESET ========== */
      :root {
        --color-primary-terracotta: #a55734;
        --color-background-deep: #6f2626;
        --color-accent-gold: #ffd700;
        --color-text-dark: #2c2c2c;
        --color-card-light: #f7eedd;
        --color-contrast-green: #4b5320;
        --color-african-blue: #1e3a5f;
        --color-african-purple: #5d3a6f;

        --bg-primary: var(--color-background-deep);
        --bg-secondary: white;
        --bg-tertiary: #f8f9fa;
        --text-primary: var(--color-text-dark);
        --text-secondary: white;
        --accent-color: var(--color-primary-terracotta);
        --border-color: #e0e0e0;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        --transition: all 0.3s ease;
      }

      .dark-mode {
        --bg-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        --bg-secondary: #1e1e1e;
        --bg-tertiary: #2d2d2d;
        --text-primary: #e0e0e0;
        --text-secondary: #ffffff;
        --accent-color: var(--color-primary-terracotta);
        --border-color: #444;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      }

      .high-contrast {
        --bg-primary: #000000;
        --bg-secondary: #000000;
        --bg-tertiary: #111111;
        --text-primary: #ffffff;
        --text-secondary: #ffffff;
        --accent-color: #ffffff;
        --border-color: #ffffff;
        --shadow: 0 0 0 2px #ffffff;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Inter", sans-serif;
        color: var(--text-primary);
      }

      body {
        background: var(--bg-primary);
        min-height: 100vh;
        padding: 20px;
        transition: var(--transition);
        scroll-behavior: smooth;
        position: relative;
        overflow-x: hidden;
      }

      /* ========== NAVBAR ========== */
      .nav-bar {
        width: calc(100% - 40px);
        background: var(--bg-secondary);
        border-radius: 15px;
        box-shadow: var(--shadow);
        padding: 15px 0;
        margin-bottom: 20px;
        transition: var(--transition);
        overflow: visible !important;
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        border: 1px solid var(--border-color);
        transform: translateY(0);
      }

      .nav-bar.hidden {
        transform: translateY(-100px);
      }

      .nav-bar.scrolled {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        border-radius: 0 0 15px 15px;
      }

      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 30px;
        min-height: 60px;
        position: relative;
        z-index: 1001;
      }

      .nav-header {
        display: flex;
        align-items: center;
        flex-shrink: 0;
        gap: 15px;
      }

      .toggle-btn {
        background: none;
        border: 2px solid var(--accent-color);
        font-size: 1.5rem;
        color: var(--accent-color);
        cursor: pointer;
        padding: 10px;
        border-radius: 50%;
        transition: var(--transition);
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        z-index: 1001;
        display: none;
      }

      .toggle-btn:hover {
        background: var(--accent-color);
        color: var(--bg-secondary);
        transform: rotate(90deg);
      }

      .nav-content {
        display: flex;
        align-items: center;
        gap: 20px;
        flex: 1;
      }

      .nav-links {
        list-style: none;
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
        margin: 0;
        padding: 0;
        transition: var(--transition);
      }

      .nav-links.show {
        display: flex !important;
        animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .nav-links li {
        margin-bottom: 0;
        flex-shrink: 0;
      }

      .nav-links a {
        display: flex;
        align-items: center;
        padding: 10px 16px;
        text-decoration: none;
        color: var(--text-primary);
        border-radius: 10px;
        transition: var(--transition);
        font-weight: 600;
        white-space: nowrap;
        font-size: 0.9rem;
        border: 2px solid transparent;
        background: transparent;
      }

      .nav-links a:hover {
        background: var(--accent-color);
        color: var(--bg-secondary);
        border: 2px solid var(--accent-color);
      }

      .nav-links a.active {
        background: var(--bg-secondary);
        color: var(--accent-color);
        border: 2px solid var(--accent-color);
      }

      .nav-links i {
        font-size: 1.1rem;
        width: 20px;
        text-align: center;
        margin-right: 6px;
        flex-shrink: 0;
      }

      /* Área da Conta do Usuário */
      .user-account {
        position: static;
        margin-left: auto;
      }

      .user-btn {
        display: flex;
        align-items: center;
        background: none;
        border: 2px solid var(--accent-color);
        border-radius: 50px;
        padding: 8px 15px;
        cursor: pointer;
        transition: var(--transition);
        color: var(--text-primary);
        font-weight: 600;
        position: relative;
        z-index: 1002;
      }

      .user-btn:hover {
        background: var(--accent-color);
        color: var(--bg-secondary);
      }

      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: var(--accent-color);
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--bg-secondary);
        font-weight: bold;
        margin-right: 8px;
        font-size: 0.9rem;
      }

      .user-name {
        margin-right: 5px;
        font-size: 0.9rem;
      }

      /* DROPDOWN */
      .user-dropdown {
        position: fixed !important;
        top: 90px !important;
        right: 20px !important;
        background: var(--bg-secondary);
        border-radius: 10px;
        box-shadow: var(--shadow);
        min-width: 200px;
        padding: 10px 0;
        margin-top: 0 !important;
        display: none;
        z-index: 1100 !important;
        border: 1px solid var(--border-color);
        animation: dropdownFade 0.3s ease;
        max-width: 250px;
      }

      .user-dropdown.show {
        display: block !important;
      }

      .user-dropdown::before {
        content: "";
        position: absolute;
        top: -8px;
        right: 20px;
        width: 0;
        height: 0;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-bottom: 8px solid var(--bg-secondary);
        z-index: 1101;
      }

      @keyframes dropdownFade {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .dropdown-item {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        text-decoration: none;
        color: var(--text-primary);
        transition: var(--transition);
        border: none;
        background: none;
        width: 100%;
        text-align: left;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .dropdown-item:hover {
        background: var(--bg-tertiary);
      }

      .dropdown-item i {
        margin-right: 10px;
        width: 20px;
        text-align: center;
        font-size: 1rem;
      }

      .dropdown-divider {
        height: 1px;
        background: var(--border-color);
        margin: 8px 0;
      }

      /* ========== CONTAINER PRINCIPAL ========== */
      .container {
        position: relative;
        background-color: var(--bg-secondary);
        border-radius: 15px;
        box-shadow: var(--shadow);
        overflow: hidden;
        transition: var(--transition);
        z-index: 10;
        border: 1px solid var(--border-color);
        margin-top: 100px;
      }

      .background-carousel {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        overflow: hidden;
      }

      .carousel-slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 1.5s ease-in-out;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      .carousel-slide.active {
        opacity: 0.6;
      }

      .carousel-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(111, 38, 38, 0.5) 0%,
          rgba(165, 87, 52, 0.3) 50%,
          rgba(30, 58, 95, 0.1) 100%
        );
        z-index: 2;
      }

      .african-pattern {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 3;
        opacity: 0.1;
      }

      .pattern-1 {
        background-image: radial-gradient(
          circle,
          var(--color-accent-gold) 1px,
          transparent 1px
        );
        background-size: 20px 20px;
      }

      .pattern-2 {
        background-image: linear-gradient(
            45deg,
            transparent 49%,
            var(--color-african-blue) 49%,
            var(--color-african-blue) 51%,
            transparent 51%
          ),
          linear-gradient(
            -45deg,
            transparent 49%,
            var(--color-african-purple) 49%,
            var(--color-african-purple) 51%,
            transparent 51%
          );
        background-size: 30px 30px;
      }

      .container-content {
        position: relative;
        z-index: 4;
      }

      /* ========== HEADER ========== */
      .header {
        background: linear-gradient(
          135deg,
          var(--color-background-deep) 0%,
          var(--color-primary-terracotta) 100%
        );
        color: var(--bg-secondary);
        text-align: center;
        padding: 40px 25px;
        position: relative;
        overflow: hidden;
        border-bottom: 3px solid var(--color-accent-gold);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 300px;
      }

      .header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          45deg,
          transparent 30%,
          rgba(255, 215, 0, 0.1) 50%,
          transparent 70%
        );
        animation: shimmer 3s infinite linear;
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      .header h1 {
        font-size: 4rem;
        font-weight: 700;
        letter-spacing: 2px;
        font-family: "Fugaz One", cursive;
        text-transform: uppercase;
        color: var(--color-accent-gold);
        text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.2);
        margin: 0;
        position: relative;
        z-index: 1;
      }

      .header-content {
        position: relative;
        z-index: 2;
        max-width: 1200px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .header-logo-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 20px;
        width: 100%;
      }

      .header-logo {
        max-width: 800px;
        width: 100%;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }

      .header-title {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 15px;
        color: var(--color-card-light);
        text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.2);
      }

      .header-decoration {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 20px;
        background: var(--color-accent-gold);
        opacity: 0.7;
      }

      .header-pattern {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0.1;
        background-image: radial-gradient(
            circle,
            var(--color-accent-gold) 1px,
            transparent 1px
          ),
          linear-gradient(
            45deg,
            transparent 49%,
            var(--color-african-blue) 49%,
            var(--color-african-blue) 51%,
            transparent 51%
          );
        background-size: 30px 30px, 40px 40px;
      }

      /* ========== BIBLIOTECA ========== */
      .biblioteca-container {
        padding: 50px 30px;
      }

      .biblioteca-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
        flex-wrap: wrap;
        gap: 20px;
      }

      .biblioteca-title {
        font-family: "Fugaz One", cursive;
        color: var(--accent-color);
        font-size: 2.8rem;
        margin: 0;
      }

      .biblioteca-stats {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .stat-item {
        background: var(--bg-tertiary);
        padding: 12px 18px;
        border-radius: 10px;
        border-left: 4px solid var(--accent-color);
        font-weight: 600;
        box-shadow: var(--shadow);
        transition: var(--transition);
      }

      .stat-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      }

      .biblioteca-search {
        display: flex;
        gap: 20px;
        margin-bottom: 40px;
        flex-wrap: wrap;
      }

      .search-box {
        flex: 1;
        min-width: 350px;
        position: relative;
      }

      .search-input {
        width: 100%;
        padding: 18px 25px;
        border: 2px solid var(--accent-color);
        border-radius: 50px;
        font-size: 1.1rem;
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-weight: 600;
        transition: var(--transition);
        box-shadow: var(--shadow);
      }

      .search-input:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(165, 87, 52, 0.3);
      }

      .search-button {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: var(--accent-color);
        color: var(--bg-secondary);
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
        box-shadow: var(--shadow);
      }

      .search-button:hover {
        background: #8c472a;
        transform: translateY(-50%) scale(1.05);
      }

      .filter-select {
        padding: 18px 25px;
        border: 2px solid var(--accent-color);
        border-radius: 50px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-weight: 600;
        min-width: 220px;
        cursor: pointer;
        transition: var(--transition);
        box-shadow: var(--shadow);
      }

      .filter-select:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(165, 87, 52, 0.3);
      }

      .biblioteca-content {
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 35px;
      }

      .biblioteca-sidebar {
        background: var(--bg-tertiary);
        border-radius: 15px;
        padding: 25px;
        height: fit-content;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
        transition: var(--transition);
      }

      .biblioteca-sidebar:hover {
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
      }

      .sidebar-title {
        font-family: "Fugaz One", cursive;
        color: var(--accent-color);
        margin-bottom: 25px;
        font-size: 1.6rem;
        border-bottom: 3px solid var(--accent-color);
        padding-bottom: 12px;
      }

      .filter-group {
        margin-bottom: 30px;
      }

      .filter-group h3 {
        color: var(--accent-color);
        margin-bottom: 18px;
        font-size: 1.2rem;
        font-weight: 700;
      }

      .filter-options {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .filter-option {
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        padding: 8px 0;
        transition: var(--transition);
        border-radius: 8px;
        padding: 8px 12px;
      }

      .filter-option:hover {
        background: var(--bg-secondary);
        color: var(--accent-color);
      }

      .filter-option input {
        width: 20px;
        height: 20px;
        accent-color: var(--accent-color);
      }

      .filter-option label {
        cursor: pointer;
        font-weight: 600;
        flex: 1;
      }

      /* Botão de Upload na Sidebar */
      .upload-sidebar-btn {
        width: 100%;
        padding: 15px;
        background: var(--accent-color);
        color: white;
        border: none;
        border-radius: 10px;
        font-weight: 700;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
      }

      .upload-sidebar-btn:hover {
        background: #8c472a;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      .upload-sidebar-btn i {
        font-size: 1.2rem;
      }

      .biblioteca-main {
        display: flex;
        flex-direction: column;
        gap: 25px;
      }

      .results-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .results-count {
        font-weight: 700;
        color: var(--accent-color);
        font-size: 1.1rem;
      }

      .sort-select {
        padding: 12px 18px;
        border: 2px solid var(--accent-color);
        border-radius: 10px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
      }

      .sort-select:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(165, 87, 52, 0.3);
      }

      .items-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 30px;
      }

      .item-card {
        background: var(--bg-tertiary);
        border-radius: 15px;
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: var(--transition);
        border: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .item-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        border-color: var(--accent-color);
      }

      .item-image {
        height: 200px;
        background: var(--accent-color);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--bg-secondary);
        font-size: 3.5rem;
        position: relative;
        overflow: hidden;
      }

      .item-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .item-image::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(0, 0, 0, 0.1) 0%,
          transparent 100%
        );
      }

      .item-content {
        padding: 25px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .item-type {
        display: inline-block;
        background: var(--accent-color);
        color: var(--bg-secondary);
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: 700;
        margin-bottom: 12px;
        text-transform: uppercase;
        align-self: flex-start;
      }

      .item-title {
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 12px;
        line-height: 1.3;
        color: var(--text-primary);
      }

      .item-author {
        font-size: 1rem;
        color: var(--text-primary);
        opacity: 0.8;
        margin-bottom: 15px;
        font-weight: 600;
      }

      .item-description {
        font-size: 0.95rem;
        line-height: 1.6;
        margin-bottom: 20px;
        flex: 1;
        font-weight: 600;
      }

      .item-meta {
        display: flex;
        justify-content: space-between;
        font-size: 0.85rem;
        color: var(--text-primary);
        opacity: 0.7;
        margin-bottom: 20px;
        font-weight: 600;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
      }

      .item-actions {
        display: flex;
        gap: 12px;
      }

      .action-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 700;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .view-btn {
        background: var(--color-african-blue);
        color: white;
      }

      .view-btn:hover {
        background: #152a4a;
        transform: translateY(-2px);
      }

      .save-btn {
        background: var(--color-contrast-green);
        color: white;
      }

      .save-btn:hover {
        background: #3c441a;
        transform: translateY(-2px);
      }

      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-primary);
        grid-column: 1 / -1;
      }

      .empty-state i {
        font-size: 4rem;
        color: var(--accent-color);
        margin-bottom: 20px;
      }

      .empty-state h3 {
        font-size: 1.8rem;
        margin-bottom: 15px;
        color: var(--accent-color);
      }

      .empty-state p {
        font-size: 1.1rem;
        max-width: 500px;
        margin: 0 auto;
        line-height: 1.6;
      }

      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 12px;
        margin-top: 40px;
      }

      .page-btn {
        width: 45px;
        height: 45px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid var(--accent-color);
        border-radius: 8px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        cursor: pointer;
        font-weight: 700;
        transition: var(--transition);
      }

      .page-btn.active {
        background: var(--accent-color);
        color: var(--bg-secondary);
      }

      .page-btn:hover:not(.active) {
        background: var(--bg-tertiary);
        transform: translateY(-2px);
      }

      .page-dots {
        padding: 0 12px;
        font-weight: 700;
      }

      /* ========== FOOTER ========== */
      .footer {
        background: var(--bg-tertiary);
        padding: 50px 30px;
        border-top: 1px solid var(--border-color);
        margin-top: 50px;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 40px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .footer-logo {
        font-family: "Fugaz One", cursive;
        font-size: 1.8rem;
        color: var(--accent-color);
        font-weight: bold;
        margin-bottom: 20px;
      }

      .footer-info p {
        margin-bottom: 15px;
        font-weight: 600;
        line-height: 1.6;
      }

      .footer-links h3 {
        color: var(--accent-color);
        margin-bottom: 20px;
        font-size: 1.3rem;
      }

      .footer-links ul {
        list-style: none;
      }

      .footer-links li {
        margin-bottom: 10px;
      }

      .footer-links a {
        text-decoration: none;
        color: var(--text-primary);
        transition: var(--transition);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .footer-links a:hover {
        color: var(--accent-color);
      }

      .footer-contact h3 {
        color: var(--accent-color);
        margin-bottom: 20px;
        font-size: 1.3rem;
      }

      .contact-info {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .contact-item {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
      }

      .contact-item i {
        color: var(--accent-color);
        width: 20px;
      }

      .copyright {
        text-align: center;
        padding: 25px;
        background: var(--bg-tertiary);
        color: var(--text-primary);
        font-size: 0.9rem;
        border-top: 1px solid var(--border-color);
        margin-top: 30px;
      }

      /* Modal e Help Box Styles (do index) */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        z-index: 1200;
      }

      .modal-content {
        background-color: var(--bg-secondary);
        padding: 30px;
        border-radius: 15px;
        width: 90%;
        max-width: 500px;
        text-align: center;
        box-shadow: var(--shadow);
        animation: modalFade 0.3s;
        color: var(--text-primary);
        border: 3px solid var(--accent-color);
        max-height: 90vh;
        overflow-y: auto;
      }

      .config-modal-content {
        max-width: 600px;
        text-align: left;
      }

      .config-section {
        margin-bottom: 20px;
        padding: 15px;
        border: 2px solid var(--border-color);
        border-radius: 10px;
        background: var(--bg-tertiary);
      }

      .config-section h3 {
        color: var(--accent-color);
        margin-bottom: 10px;
        font-size: 1.2rem;
        font-weight: 700;
      }

      .config-option {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        padding: 8px 0;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
        vertical-align: middle;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 24px;
        border: 2px solid #ccc;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 2px;
        bottom: 2px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }

      input:checked + .slider {
        background-color: var(--accent-color);
        border: 2px solid var(--accent-color);
      }

      input:checked + .slider:before {
        transform: translateX(26px);
      }

      select {
        padding: 8px 12px;
        border: 2px solid var(--border-color);
        border-radius: 5px;
        background-color: var(--bg-secondary);
        font-size: 0.9rem;
        color: var(--text-primary);
        font-weight: 600;
      }

      @keyframes modalFade {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal h2 {
        color: var(--accent-color);
        margin-bottom: 15px;
        font-family: "Fugaz One", cursive;
        font-size: 2.2rem;
        font-weight: 700;
      }

      .modal p {
        margin-bottom: 20px;
        line-height: 1.6;
        font-weight: 600;
      }

      .close-button {
        background-color: var(--accent-color);
        color: var(--bg-secondary);
        border: none;
        padding: 10px 25px;
        border-radius: 50px;
        cursor: pointer;
        font-weight: 700;
        border: 2px solid var(--accent-color);
        transition: var(--transition);
      }

      .close-button:hover {
        background-color: var(--bg-secondary);
        color: var(--accent-color);
        border: 2px solid var(--accent-color);
        transform: scale(1.05);
      }

      .help-box {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: var(--bg-secondary);
        border-radius: 15px;
        box-shadow: var(--shadow);
        padding: 30px;
        z-index: 1201;
        max-width: 600px;
        width: 90%;
        display: none;
        border: 3px solid var(--accent-color);
        animation: helpBoxFade 0.3s ease-out;
      }

      @keyframes helpBoxFade {
        from {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1);
        }
      }

      .help-box-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--accent-color);
        padding-bottom: 15px;
      }

      .help-box-header h2 {
        color: var(--accent-color);
        font-family: "Fugaz One", cursive;
        font-size: 1.8rem;
        margin: 0;
      }

      .close-help-box {
        background: none;
        border: none;
        color: var(--accent-color);
        font-size: 1.5rem;
        cursor: pointer;
        transition: var(--transition);
      }

      .close-help-box:hover {
        transform: scale(1.2);
      }

      .help-content {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .help-item {
        background: var(--bg-tertiary);
        padding: 15px;
        border-radius: 10px;
        border-left: 4px solid var(--accent-color);
        transition: var(--transition);
      }

      .help-item:hover {
        transform: translateX(5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .help-item-header {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }

      .help-item-header i {
        font-size: 1.3rem;
        color: var(--accent-color);
        margin-right: 10px;
        width: 30px;
        text-align: center;
      }

      .help-item-header h3 {
        color: var(--accent-color);
        margin: 0;
        font-size: 1.2rem;
      }

      .help-item p {
        margin: 0;
        line-height: 1.5;
        font-weight: 600;
      }

      .help-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1199;
        display: none;
      }

      /* Modal de Upload */
      .upload-modal-content {
        max-width: 500px;
      }

      .upload-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .form-group label {
        font-weight: 600;
        color: var(--accent-color);
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        padding: 12px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-weight: 600;
        transition: var(--transition);
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(165, 87, 52, 0.2);
      }

      .form-group textarea {
        min-height: 100px;
        resize: vertical;
      }

      .file-input-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
      }

      .file-input-wrapper input[type="file"] {
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }

      .file-input-button {
        padding: 12px 20px;
        background: var(--color-african-blue);
        color: white;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        font-weight: 600;
        transition: var(--transition);
        cursor: pointer;
      }

      .file-input-button:hover {
        background: #152a4a;
      }

      .file-name {
        margin-top: 8px;
        font-size: 0.9rem;
        color: var(--text-primary);
        opacity: 0.8;
      }

      /* ========== RESPONSIVIDADE ========== */
      @media (max-width: 1024px) {
        .header {
          padding: 35px 20px;
          min-height: 280px;
        }

        .header-logo {
          max-width: 600px;
        }

        .biblioteca-content {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 768px) {
        .header {
          padding: 30px 15px;
          min-height: 250px;
        }

        .header-logo {
          max-width: 100%;
          transform: scale(0.9);
        }

        .nav-bar {
          width: calc(100% - 20px);
          left: 10px;
          top: 10px;
          overflow: visible !important;
        }

        .container {
          margin-top: 70px;
        }

        .nav-container {
          flex-wrap: wrap;
          padding: 0 20px;
          gap: 10px;
        }

        .nav-header {
          order: 1;
          flex: 1;
        }

        .user-account {
          order: 2;
          margin-left: 0;
        }

        .nav-content {
          order: 3;
          width: 100%;
          flex-direction: column;
          display: none;
        }

        .nav-content.show {
          display: flex;
          animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .user-dropdown {
          position: fixed !important;
          top: 80px !important;
          right: 10px !important;
          left: 10px !important;
          width: auto !important;
          max-width: calc(100% - 20px);
          z-index: 1100 !important;
          margin-top: 0 !important;
        }

        .user-dropdown::before {
          right: 20px;
          left: auto;
        }

        .toggle-btn {
          display: flex;
        }

        .nav-links {
          width: 100%;
          flex-direction: column;
          gap: 8px;
        }

        .nav-links a {
          justify-content: flex-start;
          padding: 12px 16px;
          font-size: 0.9rem;
        }

        .nav-links span {
          display: inline-block;
          margin-left: 10px;
        }

        .nav-links i {
          margin-right: 8px;
          font-size: 1.1rem;
        }

        .biblioteca-search {
          flex-direction: column;
        }

        .search-box {
          min-width: 100%;
        }

        .filter-select {
          width: 100%;
        }

        .items-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 600px) {
        .container {
          margin-top: 60px;
        }

        .header {
          padding: 25px 15px;
          min-height: 200px;
        }

        .header-logo {
          max-width: 100%;
          transform: scale(0.8);
        }

        .biblioteca-title {
          font-size: 2.2rem;
        }
      }

      @media (max-width: 400px) {
        .header-logo {
          transform: scale(0.7);
        }

        .biblioteca-title {
          font-size: 1.8rem;
        }

        .nav-container {
          padding: 0 15px;
        }

        .stat-item {
          padding: 10px 15px;
          font-size: 0.9rem;
        }
      }

      /* CSS adicional para melhorar a aparência da mensagem de nenhum resultado */
      .empty-state strong {
        color: var(--accent-color);
        font-weight: 700;
      }

      .empty-state p {
        max-width: 500px;
        margin: 0 auto;
        line-height: 1.6;
      }
    </style>
  </head>

  <body>
    <!-- Elementos decorativos africanos -->
    <div class="african-pattern pattern-1"></div>
    <div class="african-pattern pattern-2"></div>

    <!-- Nav Bar no Topo - Fixa com efeito de acompanhamento (IGUAL AO INDEX) -->
    <nav class="nav-bar hidden" id="navBar">
      <div class="nav-container">
        <div class="nav-header">
          <button class="toggle-btn" id="toggleBtn" aria-label="Alternar menu">
            <i class="fas fa-bars"></i>
          </button>
        </div>

        <div class="nav-content">
          <ul class="nav-links" id="navLinks">
            <li>
              <a href="index.html">
                <i class="fas fa-home"></i>
                <span>Home</span>
              </a>
            </li>
            <li>
              <a href="#" class="active">
                <i class="fas fa-book"></i>
                <span>Biblioteca</span>
              </a>
            </li>
            <li>
              <a href="educador.html">
                <i class="fas fa-chalkboard-teacher"></i>
                <span>Educador</span>
              </a>
            </li>
            <li>
              <a href="estud.html">
                <i class="fas fa-user-graduate"></i>
                <span>Estudante</span>
              </a>
            </li>
            <li>
              <a href="comun.html">
                <i class="fas fa-users"></i>
                <span>Comunidade</span>
              </a>
            </li>
            <li>
              <a href="#" id="configBtn">
                <i class="fas fa-cog"></i>
                <span>Configurações</span>
              </a>
            </li>
            <li>
              <a href="#" id="navHelpBtn">
                <i class="fas fa-question-circle"></i>
                <span>Dúvidas</span>
              </a>
            </li>
          </ul>

          <!-- Área da Conta do Usuário -->
          <div class="user-account">
            <button class="user-btn" id="userBtn">
              <div class="user-avatar" id="userAvatar">?</div>
              <span class="user-name" id="userName">Entrar</span>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div class="user-dropdown" id="userDropdown">
              <a href="#" class="dropdown-item" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i> Fazer Login
              </a>
              <a href="#" class="dropdown-item" id="registerBtn">
                <i class="fas fa-user-plus"></i> Criar Conta
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
      <!-- CARROSSEL DE BACKGROUND COMPLETO -->
      <div class="background-carousel" id="backgroundCarousel">
        <!-- As imagens serão injetadas pelo JavaScript -->
      </div>
      <div class="carousel-overlay"></div>

      <!-- Conteúdo principal com z-index maior -->
      <div class="container-content">
        <!-- Header Principal -->
        <div class="header">
          <div class="header-content">
            <div class="header-logo-container">
              <img
                src="public/assets/img/icons/logo_biblioteca.png"
                alt="Logo Biblioteca"
                class="header-logo"
              />
            </div>
          </div>
          <div class="header-pattern"></div>
        </div>

        <!-- Conteúdo da Biblioteca -->
        <div class="biblioteca-container">
          <!-- Cabeçalho da Biblioteca -->
          <div class="biblioteca-header">
            <h2 class="biblioteca-title">Acervo Digital</h2>
            <div class="biblioteca-stats">
              <div class="stat-item">Livros: 0</div>
              <div class="stat-item">Artigos: 0</div>
              <div class="stat-item">Vídeos: 0</div>
              <div class="stat-item">Materiais: 0</div>
            </div>
          </div>

          <!-- Barra de Pesquisa e Filtros -->
          <div class="biblioteca-search">
            <div class="search-box">
              <input
                type="text"
                class="search-input"
                id="searchInput"
                placeholder="Pesquisar por título, autor, assunto..."
              />
              <button class="search-button" id="searchButton">
                <i class="fas fa-search"></i>
              </button>
            </div>
            <select class="filter-select" id="categoryFilter">
              <option value="">Todas as categorias</option>
              <option value="historia">História Afro-Brasileira</option>
              <option value="musica">Música e Dança</option>
              <option value="culinaria">Culinária</option>
              <option value="religiao">Religião</option>
              <option value="arte">Arte e Cultura</option>
              <option value="literatura">Literatura</option>
              <option value="ciencias">Ciências Sociais</option>
            </select>
          </div>

          <!-- Conteúdo Principal -->
          <div class="biblioteca-content">
            <!-- Sidebar de Filtros -->
            <div class="biblioteca-sidebar">
              <h3 class="sidebar-title">Filtrar por</h3>

              <div class="filter-group">
                <h3>Tipo de Material</h3>
                <div class="filter-options">
                  <div class="filter-option">
                    <input type="checkbox" id="filter-book" checked />
                    <label for="filter-book">Livros</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-article" checked />
                    <label for="filter-article">Artigos</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-video" checked />
                    <label for="filter-video">Vídeos</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-reference" checked />
                    <label for="filter-reference"
                      >Materiais de Referência</label
                    >
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <h3>Ano de Publicação</h3>
                <div class="filter-options">
                  <div class="filter-option">
                    <input type="checkbox" id="filter-year-2020" />
                    <label for="filter-year-2020">2020 - Atual</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-year-2010" />
                    <label for="filter-year-2010">2010 - 2019</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-year-2000" />
                    <label for="filter-year-2000">2000 - 2009</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-year-1990" />
                    <label for="filter-year-1990">1990 - 1999</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-year-older" />
                    <label for="filter-year-older">Antes de 1990</label>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <h3>Idioma</h3>
                <div class="filter-options">
                  <div class="filter-option">
                    <input type="checkbox" id="filter-lang-pt" checked />
                    <label for="filter-lang-pt">Português</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-lang-en" />
                    <label for="filter-lang-en">Inglês</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-lang-es" />
                    <label for="filter-lang-es">Espanhol</label>
                  </div>
                  <div class="filter-option">
                    <input type="checkbox" id="filter-lang-fr" />
                    <label for="filter-lang-fr">Francês</label>
                  </div>
                </div>
              </div>

              <!-- Botão de Upload na Sidebar -->
              <button class="upload-sidebar-btn" id="uploadButton">
                <i class="fas fa-cloud-upload-alt"></i> Adicionar Conteúdo
              </button>
            </div>

            <!-- Conteúdo Principal da Biblioteca -->
            <div class="biblioteca-main">
              <div class="results-header">
                <div class="results-count" id="resultsCount">
                  Carregando conteúdo...
                </div>
                <select class="sort-select" id="sortSelect">
                  <option value="relevance">Ordenar por: Relevância</option>
                  <option value="title">Ordenar por: Título A-Z</option>
                  <option value="title-desc">Ordenar por: Título Z-A</option>
                  <option value="date">Ordenar por: Mais Recente</option>
                  <option value="date-old">Ordenar por: Mais Antigo</option>
                </select>
              </div>

              <!-- Grade de Itens -->
              <div class="items-grid" id="itemsGrid">
                <!-- Conteúdo será carregado pelo JavaScript -->
              </div>

              <!-- Paginação (oculta quando não há itens) -->
              <div class="pagination" id="pagination" style="display: none">
                <!-- Paginação será gerada via JavaScript quando houver itens -->
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
          <div class="footer-content">
            <div class="footer-info">
              <div class="footer-logo">Somos Um</div>
              <p>
                Plataforma dedicada ao ensino da História e Cultura
                Afro-Brasileira
              </p>
              <p>Fundada em 22 de Novembro de 2025</p>
            </div>

            <div class="footer-links">
              <h3>Links Rápidos</h3>
              <ul>
                <li>
                  <a href="index.html"
                    ><i class="fas fa-chevron-right"></i> Home</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><i class="fas fa-chevron-right"></i> Biblioteca</a
                  >
                </li>
                <li>
                  <a href="educador.html"
                    ><i class="fas fa-chevron-right"></i> Educador</a
                  >
                </li>
                <li>
                  <a href="estud.html"
                    ><i class="fas fa-chevron-right"></i> Estudante</a
                  >
                </li>
                <li>
                  <a href="comun.html"
                    ><i class="fas fa-chevron-right"></i> Comunidade</a
                  >
                </li>
              </ul>
            </div>

            <div class="footer-contact">
              <h3>Contato</h3>
              <div class="contact-info">
                <div class="contact-item">
                  <i class="fas fa-envelope"></i>
                  <span>contato@somosum.org</span>
                </div>
                <div class="contact-item">
                  <i class="fas fa-phone"></i>
                  <span>(11) 1234-5678</span>
                </div>
                <div class="contact-item">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>São Paulo, Brasil</span>
                </div>
              </div>
            </div>
          </div>
        </footer>

        <!-- Direitos autorais -->
        <div class="copyright">
          <p>&copy; 2025 Somos Um - Todos os direitos reservados</p>
        </div>
      </div>
    </div>

    <!-- Caixinha de Ajuda (do index) -->
    <div class="help-overlay" id="helpOverlay"></div>
    <div class="help-box" id="helpBox">
      <div class="help-box-header">
        <h2><i class="fas fa-question-circle"></i> Como usar a Biblioteca</h2>
        <button
          class="close-help-box"
          id="closeHelpBox"
          aria-label="Fechar ajuda"
        >
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="help-content">
        <div class="help-item">
          <div class="help-item-header">
            <i class="fas fa-search"></i>
            <h3>PESQUISA</h3>
          </div>
          <p>
            Use a barra de pesquisa para encontrar materiais por título, autor
            ou assunto específico.
          </p>
        </div>
        <div class="help-item">
          <div class="help-item-header">
            <i class="fas fa-filter"></i>
            <h3>FILTROS</h3>
          </div>
          <p>
            Utilize os filtros laterais para refinar sua busca por tipo de
            material, ano de publicação ou idioma.
          </p>
        </div>
        <div class="help-item">
          <div class="help-item-header">
            <i class="fas fa-sort"></i>
            <h3>ORDENAÇÃO</h3>
          </div>
          <p>
            Classifique os resultados por relevância, título ou data de
            publicação.
          </p>
        </div>
        <div class="help-item">
          <div class="help-item-header">
            <i class="fas fa-bookmark"></i>
            <h3>SALVAR</h3>
          </div>
          <p>
            Clique no botão "Salvar" para guardar materiais para acesso futuro.
          </p>
        </div>
      </div>
    </div>

    <!-- Modais (do index) -->
    <div class="modal" id="configModal">
      <div class="modal-content config-modal-content">
        <h2><i class="fas fa-cog"></i> Configurações</h2>

        <div class="config-section">
          <h3>Aparência</h3>
          <div class="config-option">
            <span>Tema Escuro</span>
            <label class="switch">
              <input type="checkbox" id="darkTheme" />
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <div class="config-section">
          <h3>Notificações</h3>
          <div class="config-option">
            <span>Notificações por Email</span>
            <label class="switch">
              <input type="checkbox" id="emailNotifications" checked />
              <span class="slider"></span>
            </label>
          </div>
          <div class="config-option">
            <span>Notificações do Sistema</span>
            <label class="switch">
              <input type="checkbox" id="systemNotifications" checked />
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <div class="config-section">
          <h3>Preferências</h3>
          <div class="config-option">
            <span>Tamanho da Fonte</span>
            <select id="fontSizeSelect">
              <option value="small">Pequeno</option>
              <option value="medium" selected>Médio</option>
              <option value="large">Grande</option>
            </select>
          </div>
        </div>

        <div style="text-align: center; margin-top: 20px">
          <button class="close-button" data-modal="configModal">
            Salvar e Fechar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Login -->
    <div class="modal" id="loginModal">
      <div class="modal-content config-modal-content">
        <h2><i class="fas fa-sign-in-alt"></i> Fazer Login</h2>

        <div class="config-section">
          <h3>Informações de Acesso</h3>
          <div class="config-option">
            <span>Email</span>
            <input
              type="email"
              id="loginEmail"
              placeholder="seu@email.com"
              style="
                padding: 8px 12px;
                border: 2px solid var(--border-color);
                border-radius: 5px;
                background-color: var(--bg-secondary);
                font-size: 0.9rem;
                color: var(--text-primary);
                font-weight: 600;
              "
            />
          </div>
          <div class="config-option">
            <span>Senha</span>
            <input
              type="password"
              id="loginPassword"
              placeholder="Sua senha"
              style="
                padding: 8px 12px;
                border: 2px solid var(--border-color);
                border-radius: 5px;
                background-color: var(--bg-secondary);
                font-size: 0.9rem;
                color: var(--text-primary);
                font-weight: 600;
              "
            />
          </div>
        </div>

        <div style="text-align: center; margin-top: 20px">
          <button class="close-button" id="loginSubmit">Entrar</button>
        </div>
      </div>
    </div>

    <!-- Modal de Registro -->
    <div class="modal" id="registerModal">
      <div class="modal-content config-modal-content">
        <h2><i class="fas fa-user-plus"></i> Criar Conta</h2>

        <div class="config-section">
          <h3>Informações Pessoais</h3>
          <div class="config-option">
            <span>Nome Completo</span>
            <input
              type="text"
              id="registerName"
              placeholder="Seu nome completo"
              style="
                padding: 8px 12px;
                border: 2px solid var(--border-color);
                border-radius: 5px;
                background-color: var(--bg-secondary);
                font-size: 0.9rem;
                color: var(--text-primary);
                font-weight: 600;
              "
            />
          </div>
          <div class="config-option">
            <span>Email</span>
            <input
              type="email"
              id="registerEmail"
              placeholder="seu@email.com"
              style="
                padding: 8px 12px;
                border: 2px solid var(--border-color);
                border-radius: 5px;
                background-color: var(--bg-secondary);
                font-size: 0.9rem;
                color: var(--text-primary);
                font-weight: 600;
              "
            />
          </div>
          <div class="config-option">
            <span>Senha</span>
            <input
              type="password"
              id="registerPassword"
              placeholder="Crie uma senha"
              style="
                padding: 8px 12px;
                border: 2px solid var(--border-color);
                border-radius: 5px;
                background-color: var(--bg-secondary);
                font-size: 0.9rem;
                color: var(--text-primary);
                font-weight: 600;
              "
            />
          </div>
        </div>

        <div style="text-align: center; margin-top: 20px">
          <button class="close-button" id="registerSubmit">Criar Conta</button>
        </div>
      </div>
    </div>

    <!-- Modal de Adicionar Conteúdo -->
    <div class="modal" id="uploadModal">
      <div class="modal-content upload-modal-content">
        <h2><i class="fas fa-plus-circle"></i> Adicionar Conteúdo</h2>

        <div class="upload-form" id="uploadForm">
          <div class="form-group">
            <label for="contentType">Tipo de Conteúdo *</label>
            <select id="contentType" required>
              <option value="">Selecione o tipo</option>
              <option value="pdf">PDF da Pasta</option>
              <option value="youtube">Link do YouTube</option>
            </select>
          </div>

          <div class="form-group" id="pdfSelectGroup">
            <label for="pdfSelect">Selecione um PDF da pasta *</label>
            <select id="pdfSelect" required>
              <option value="">Carregando PDFs...</option>
            </select>
            <p
              style="
                font-size: 0.8rem;
                color: var(--text-primary);
                opacity: 0.7;
              "
            >
              Adicione seus PDFs na pasta:
              <strong>public/assets/biblioteca/pdfs/</strong>
            </p>
          </div>

          <div class="form-group" id="youtubeLinkGroup" style="display: none">
            <label for="youtubeLink">Link do YouTube *</label>
            <input
              type="url"
              id="youtubeLink"
              placeholder="https://www.youtube.com/watch?v=..."
            />
            <p
              style="
                font-size: 0.8rem;
                color: var(--text-primary);
                opacity: 0.7;
              "
            >
              Cole o link completo do vídeo do YouTube
            </p>
          </div>

          <div class="form-group">
            <label for="uploadTitle">Título *</label>
            <input
              type="text"
              id="uploadTitle"
              placeholder="Digite o título do material"
              required
            />
          </div>

          <div class="form-group">
            <label for="uploadAuthor">Autor *</label>
            <input
              type="text"
              id="uploadAuthor"
              placeholder="Nome do autor"
              required
            />
          </div>

          <div class="form-group">
            <label for="uploadDescription">Descrição *</label>
            <textarea
              id="uploadDescription"
              placeholder="Descreva o conteúdo do material"
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label for="uploadCategory">Categoria *</label>
            <select id="uploadCategory" required>
              <option value="">Selecione uma categoria</option>
              <option value="historia">História Afro-Brasileira</option>
              <option value="musica">Música e Dança</option>
              <option value="culinaria">Culinária</option>
              <option value="religiao">Religião</option>
              <option value="arte">Arte e Cultura</option>
              <option value="literatura">Literatura</option>
              <option value="ciencias">Ciências Sociais</option>
            </select>
          </div>

          <div class="form-group">
            <label for="uploadYear">Ano de Publicação *</label>
            <input
              type="number"
              id="uploadYear"
              min="1900"
              max="2025"
              value="2025"
              required
            />
          </div>

          <div class="form-group">
            <label for="uploadLanguage">Idioma *</label>
            <select id="uploadLanguage" required>
              <option value="Português">Português</option>
              <option value="Inglês">Inglês</option>
              <option value="Espanhol">Espanhol</option>
              <option value="Francês">Francês</option>
            </select>
          </div>

          <div style="text-align: center; margin-top: 20px">
            <button type="submit" class="close-button" id="submitUpload">
              <i class="fas fa-plus"></i> Adicionar à Biblioteca
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Script do João IA -->
    <script
      src="public/modules/joao-ia/joao-ia.js"
      data-bot-name="João IA"
      data-theme="auto"
      data-position="bottom-right"
      data-avatar-url="public/modules/joao-ia/assets/images/joao-avatar.png"
      data-auto-init="true"
    ></script>

    <script>
      // ========== CLASSE PRINCIPAL DO APLICATIVO ==========
      class BibliotecaApp {
        constructor() {
          this.navbar = new NavbarManager();
          this.modalManager = new ModalManager();
          this.settings = new SettingsManager();
          this.helpBox = new HelpBoxManager();
          this.userAccount = new UserAccountManager();
          this.backgroundCarousel = new BackgroundCarouselManager();
          this.biblioteca = new BibliotecaManager();

          this.init();
        }

        init() {
          this.navbar.init();
          this.modalManager.init();
          this.settings.init();
          this.helpBox.init();
          this.userAccount.init();
          this.backgroundCarousel.init();
          this.biblioteca.init();

          this.settings.loadPreferences();
          this.setupNavLinks();
          this.setupUploadModal();
        }

        setupNavLinks() {
          const navLinks = document.querySelectorAll(".nav-links a");

          navLinks.forEach((link) => {
            link.addEventListener("click", (e) => {
              // Atualizar estado ativo
              navLinks.forEach((l) => l.classList.remove("active"));
              link.classList.add("active");

              // Fechar menu em mobile
              if (window.innerWidth <= 768) {
                this.navbar.closeMenu();
              }
            });
          });
        }

        setupUploadModal() {
          const uploadButton = document.getElementById("uploadButton");
          if (uploadButton) {
            uploadButton.addEventListener("click", () => {
              document.getElementById("uploadModal").style.display = "flex";
              this.biblioteca.loadPDFsFromFolder();
            });
          }

          // Alternar entre PDF e YouTube
          const contentTypeSelect = document.getElementById("contentType");
          if (contentTypeSelect) {
            contentTypeSelect.addEventListener("change", function () {
              const isYouTube = this.value === "youtube";
              document.getElementById("pdfSelectGroup").style.display =
                isYouTube ? "none" : "block";
              document.getElementById("youtubeLinkGroup").style.display =
                isYouTube ? "block" : "none";

              const pdfSelect = document.getElementById("pdfSelect");
              const youtubeLink = document.getElementById("youtubeLink");

              if (isYouTube) {
                pdfSelect.required = false;
                youtubeLink.required = true;
              } else {
                pdfSelect.required = true;
                youtubeLink.required = false;
              }
            });
          }

          // Submissão do formulário
          const uploadForm = document.getElementById("uploadForm");
          if (uploadForm) {
            uploadForm.addEventListener("submit", (e) => {
              e.preventDefault();
              this.handleAddContent();
            });
          }
        }

        handleAddContent() {
          const contentType = document.getElementById("contentType").value;
          const title = document.getElementById("uploadTitle").value;
          const author = document.getElementById("uploadAuthor").value;
          const description =
            document.getElementById("uploadDescription").value;
          const category = document.getElementById("uploadCategory").value;
          const year = parseInt(document.getElementById("uploadYear").value);
          const language = document.getElementById("uploadLanguage").value;

          let fileInfo = "";
          let type = "";

          if (contentType === "youtube") {
            const youtubeLink = document.getElementById("youtubeLink").value;
            if (
              !youtubeLink.includes("youtube.com") &&
              !youtubeLink.includes("youtu.be")
            ) {
              alert("Por favor, insira um link válido do YouTube.");
              return;
            }
            fileInfo = youtubeLink;
            type = "Vídeo";
          } else {
            const pdfSelect = document.getElementById("pdfSelect");
            if (!pdfSelect.value) {
              alert("Por favor, selecione um PDF da lista.");
              return;
            }
            fileInfo = pdfSelect.value;

            // Determinar tipo pelo nome do arquivo
            if (
              fileInfo.toLowerCase().includes("livro") ||
              fileInfo.toLowerCase().includes("book")
            ) {
              type = "Livro";
            } else if (
              fileInfo.toLowerCase().includes("artigo") ||
              fileInfo.toLowerCase().includes("article")
            ) {
              type = "Artigo";
            } else {
              type = "Material de Referência";
            }
          }

          // Criar novo item
          const newItem = {
            id: Date.now(),
            title: title,
            author: author,
            description: description,
            type: type,
            year: year,
            category: category,
            language: language,
            file: fileInfo,
            dateAdded: new Date().toISOString().split("T")[0],
          };

          // Adicionar à biblioteca
          this.biblioteca.addItem(newItem);

          // Limpar formulário
          document.getElementById("uploadForm").reset();
          document.getElementById("pdfSelectGroup").style.display = "block";
          document.getElementById("youtubeLinkGroup").style.display = "none";

          // Fechar modal
          document.getElementById("uploadModal").style.display = "none";

          // Mostrar mensagem de sucesso
          alert("Conteúdo adicionado à biblioteca com sucesso!");
        }
      }

      // ========== GERENCIADOR DA NAVBAR (IGUAL AO INDEX) ==========
      class NavbarManager {
        constructor() {
          this.navBar = document.getElementById("navBar");
          this.toggleBtn = document.getElementById("toggleBtn");
          this.navContent = document.querySelector(".nav-content");
          this.navLinks = document.getElementById("navLinks");

          this.lastScrollY = window.scrollY;
          this.ticking = false;
          this.inactivityTimer = null;
          this.hideDelay = 3000;
          this.isMenuOpen = false;
          this.isAtTop = true;
        }

        init() {
          this.setupToggle();
          this.setupScrollBehavior();
          this.setupInactivityDetection();

          setTimeout(() => {
            this.showNavbar();
          }, 100);

          this.checkIfAtTop();
        }

        checkIfAtTop() {
          this.isAtTop = window.scrollY <= 10;
          if (this.isAtTop) {
            this.showNavbar();
          }
        }

        setupToggle() {
          if (this.toggleBtn) {
            this.toggleBtn.addEventListener("click", () => {
              this.toggleMenu();
              this.resetInactivityTimer();
            });
          }
        }

        toggleMenu() {
          if (this.isMenuOpen) {
            this.closeMenu();
          } else {
            this.openMenu();
          }
        }

        openMenu() {
          if (this.navContent) {
            this.navContent.classList.add("show");
            this.isMenuOpen = true;

            const icon = this.toggleBtn.querySelector("i");
            if (icon) {
              icon.classList.remove("fa-bars");
              icon.classList.add("fa-times");
            }
          }
        }

        closeMenu() {
          if (this.navContent) {
            this.navContent.classList.remove("show");
            this.isMenuOpen = false;

            const icon = this.toggleBtn.querySelector("i");
            if (icon) {
              icon.classList.remove("fa-times");
              icon.classList.add("fa-bars");
            }
          }
        }

        setupScrollBehavior() {
          window.addEventListener("scroll", () => {
            if (!this.ticking) {
              requestAnimationFrame(() => this.updateNavbar());
              this.ticking = true;
            }
            this.resetInactivityTimer();
          });
        }

        setupInactivityDetection() {
          [
            "mousemove",
            "mousedown",
            "keypress",
            "scroll",
            "touchstart",
          ].forEach((event) => {
            document.addEventListener(event, () => this.resetInactivityTimer());
          });

          this.resetInactivityTimer();
        }

        resetInactivityTimer() {
          this.isAtTop = window.scrollY <= 10;

          if (this.isAtTop) {
            this.showNavbar();
            if (this.inactivityTimer) {
              clearTimeout(this.inactivityTimer);
            }
            return;
          }

          this.showNavbar();

          if (this.inactivityTimer) {
            clearTimeout(this.inactivityTimer);
          }

          this.inactivityTimer = setTimeout(() => {
            if (!this.isAtTop) {
              this.hideNavbar();
            }
          }, this.hideDelay);
        }

        updateNavbar() {
          const currentScrollY = window.scrollY;
          this.isAtTop = currentScrollY <= 10;

          if (this.isAtTop) {
            this.showNavbar();
            this.navBar.classList.remove("scrolled");
            this.lastScrollY = currentScrollY;
            this.ticking = false;
            return;
          }

          if (currentScrollY > this.lastScrollY && currentScrollY > 100) {
            this.hideNavbar();
          } else {
            this.showNavbar();
          }

          if (currentScrollY > 50) {
            this.navBar.classList.add("scrolled");
          } else {
            this.navBar.classList.remove("scrolled");
          }

          this.lastScrollY = currentScrollY;
          this.ticking = false;
        }

        hideNavbar() {
          if (!this.isAtTop && this.navBar) {
            this.navBar.classList.add("hidden");
          }
        }

        showNavbar() {
          if (this.navBar) {
            this.navBar.classList.remove("hidden");
          }
        }
      }

      // ========== GERENCIADOR DE MODAIS (DO INDEX) ==========
      class ModalManager {
        constructor() {
          this.buttonModalMap = {
            configBtn: "configModal",
            loginBtn: "loginModal",
            registerBtn: "registerModal",
          };
        }

        init() {
          this.setupModalButtons();
          this.setupCloseButtons();
          this.setupOutsideClick();
          this.setupEscapeKey();
          this.setupHelpButtons();
          this.setupLoginRegister();
        }

        setupHelpButtons() {
          const navHelpBtn = document.getElementById("navHelpBtn");
          if (navHelpBtn) {
            navHelpBtn.addEventListener("click", (e) => {
              e.preventDefault();
              const helpBox = document.getElementById("helpBox");
              const helpOverlay = document.getElementById("helpOverlay");
              if (helpBox && helpOverlay) {
                helpBox.style.display = "block";
                helpOverlay.style.display = "block";
              }
            });
          }

          document
            .getElementById("closeHelpBox")
            .addEventListener("click", () => {
              document.getElementById("helpBox").style.display = "none";
              document.getElementById("helpOverlay").style.display = "none";
            });
        }

        setupModalButtons() {
          Object.keys(this.buttonModalMap).forEach((buttonId) => {
            const button = document.getElementById(buttonId);
            const modalId = this.buttonModalMap[buttonId];

            if (button) {
              button.addEventListener("click", (e) => {
                e.preventDefault();
                this.openModal(modalId);
              });
            }
          });
        }

        setupCloseButtons() {
          document.querySelectorAll(".close-button").forEach((button) => {
            if (!button.id) {
              button.addEventListener("click", () => {
                const modalId = button.getAttribute("data-modal");
                this.closeModal(modalId);
              });
            }
          });

          // Fechar modais ao clicar fora
          document.querySelectorAll(".modal").forEach((modal) => {
            modal.addEventListener("click", (e) => {
              if (e.target === modal) {
                modal.style.display = "none";
              }
            });
          });
        }

        setupOutsideClick() {
          document.querySelectorAll(".modal").forEach((modal) => {
            modal.addEventListener("click", (e) => {
              if (e.target === modal) {
                modal.style.display = "none";
              }
            });
          });

          document
            .getElementById("helpOverlay")
            .addEventListener("click", () => {
              document.getElementById("helpBox").style.display = "none";
              document.getElementById("helpOverlay").style.display = "none";
            });
        }

        setupEscapeKey() {
          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              document.querySelectorAll(".modal").forEach((modal) => {
                modal.style.display = "none";
              });
              const helpBox = document.getElementById("helpBox");
              const helpOverlay = document.getElementById("helpOverlay");
              if (helpBox && helpOverlay) {
                helpBox.style.display = "none";
                helpOverlay.style.display = "none";
              }
            }
          });
        }

        setupLoginRegister() {
          document
            .getElementById("loginSubmit")
            .addEventListener("click", () => {
              const email = document.getElementById("loginEmail").value;
              const password = document.getElementById("loginPassword").value;

              if (email && password) {
                localStorage.setItem("userLoggedIn", "true");
                localStorage.setItem(
                  "userData",
                  JSON.stringify({
                    name: email.split("@")[0],
                    avatarInitial: email[0].toUpperCase(),
                  })
                );

                document
                  .querySelector(".user-account")
                  .querySelector(".user-name").textContent =
                  email.split("@")[0];
                document
                  .querySelector(".user-account")
                  .querySelector(".user-avatar").textContent =
                  email[0].toUpperCase();

                this.closeModal("loginModal");
                alert("Login realizado com sucesso!");
              } else {
                alert("Por favor, preencha todos os campos.");
              }
            });

          document
            .getElementById("registerSubmit")
            .addEventListener("click", () => {
              const name = document.getElementById("registerName").value;
              const email = document.getElementById("registerEmail").value;
              const password =
                document.getElementById("registerPassword").value;

              if (name && email && password) {
                localStorage.setItem("userLoggedIn", "true");
                localStorage.setItem(
                  "userData",
                  JSON.stringify({
                    name: name,
                    avatarInitial: name[0].toUpperCase(),
                  })
                );

                document
                  .querySelector(".user-account")
                  .querySelector(".user-name").textContent = name;
                document
                  .querySelector(".user-account")
                  .querySelector(".user-avatar").textContent =
                  name[0].toUpperCase();

                this.closeModal("registerModal");
                alert("Conta criada com sucesso!");
              } else {
                alert("Por favor, preencha todos os campos.");
              }
            });
        }

        openModal(modalId) {
          const modal = document.getElementById(modalId);
          if (modal) {
            modal.style.display = "flex";
          }
        }

        closeModal(modalId) {
          const modal = document.getElementById(modalId);
          if (modal) {
            modal.style.display = "none";
          }
        }
      }

      // ========== GERENCIADOR DE CONFIGURAÇÕES (DO INDEX) ==========
      class SettingsManager {
        constructor() {
          this.darkThemeToggle = document.getElementById("darkTheme");
          this.fontSizeSelect = document.getElementById("fontSizeSelect");
        }

        init() {
          this.setupThemeToggles();
          this.setupFontSize();
        }

        setupThemeToggles() {
          if (this.darkThemeToggle) {
            this.darkThemeToggle.addEventListener("change", () => {
              document.body.classList.toggle(
                "dark-mode",
                this.darkThemeToggle.checked
              );
              localStorage.setItem("darkTheme", this.darkThemeToggle.checked);
            });
          }
        }

        setupFontSize() {
          if (this.fontSizeSelect) {
            this.fontSizeSelect.addEventListener("change", () => {
              document.body.style.fontSize =
                this.fontSizeSelect.value === "small"
                  ? "14px"
                  : this.fontSizeSelect.value === "large"
                  ? "18px"
                  : "16px";
              localStorage.setItem("fontSize", this.fontSizeSelect.value);
            });
          }
        }

        loadPreferences() {
          if (
            localStorage.getItem("darkTheme") === "true" &&
            this.darkThemeToggle
          ) {
            this.darkThemeToggle.checked = true;
            document.body.classList.add("dark-mode");
          }

          const savedFontSize = localStorage.getItem("fontSize");
          if (savedFontSize && this.fontSizeSelect) {
            this.fontSizeSelect.value = savedFontSize;
            document.body.style.fontSize =
              savedFontSize === "small"
                ? "14px"
                : savedFontSize === "large"
                ? "18px"
                : "16px";
          }
        }
      }

      // ========== GERENCIADOR DA CAIXINHA DE AJUDA (DO INDEX) ==========
      class HelpBoxManager {
        constructor() {
          this.helpBox = document.getElementById("helpBox");
          this.closeHelpBox = document.getElementById("closeHelpBox");
          this.helpOverlay = document.getElementById("helpOverlay");
        }

        init() {
          this.setupHelpBox();
        }

        setupHelpBox() {
          if (this.closeHelpBox) {
            this.closeHelpBox.addEventListener("click", () => {
              this.closeHelpBoxFunc();
            });
          }

          if (this.helpOverlay) {
            this.helpOverlay.addEventListener("click", () => {
              this.closeHelpBoxFunc();
            });
          }
        }

        closeHelpBoxFunc() {
          if (this.helpBox) {
            this.helpBox.style.display = "none";
          }
          if (this.helpOverlay) {
            this.helpOverlay.style.display = "none";
          }
          document.body.style.overflow = "auto";
        }
      }

      // ========== GERENCIADOR DA CONTA DO USUÁRIO (DO INDEX) ==========
      class UserAccountManager {
        constructor() {
          this.userBtn = document.getElementById("userBtn");
          this.userDropdown = document.getElementById("userDropdown");
          this.userAvatar = document.getElementById("userAvatar");
          this.userName = document.getElementById("userName");
          this.loginBtn = document.getElementById("loginBtn");
          this.registerBtn = document.getElementById("registerBtn");

          this.isDropdownOpen = false;
          this.isLoggedIn = false;
        }

        init() {
          this.setupUserDropdown();
          this.checkLoginStatus();
        }

        setupUserDropdown() {
          if (this.userBtn) {
            this.userBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              e.preventDefault();
              this.toggleDropdown();
            });
          }

          if (this.loginBtn) {
            this.loginBtn.addEventListener("click", (e) => {
              e.preventDefault();
              this.openLoginModal();
            });
          }

          if (this.registerBtn) {
            this.registerBtn.addEventListener("click", (e) => {
              e.preventDefault();
              this.openRegisterModal();
            });
          }

          document.addEventListener("click", (e) => {
            if (this.isDropdownOpen) {
              const isClickInsideDropdown =
                this.userDropdown && this.userDropdown.contains(e.target);
              const isClickOnButton =
                this.userBtn && this.userBtn.contains(e.target);

              if (!isClickInsideDropdown && !isClickOnButton) {
                this.closeDropdown();
              }
            }
          });

          window.addEventListener("scroll", () => {
            if (this.isDropdownOpen) {
              this.closeDropdown();
            }
          });

          window.addEventListener("resize", () => {
            if (this.isDropdownOpen) {
              this.closeDropdown();
            }
          });

          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape" && this.isDropdownOpen) {
              this.closeDropdown();
            }
          });
        }

        toggleDropdown() {
          if (this.isDropdownOpen) {
            this.closeDropdown();
          } else {
            this.openDropdown();
          }
        }

        openDropdown() {
          if (this.userDropdown) {
            this.closeAllOtherDropdowns();

            this.calculateDropdownPosition();

            this.userDropdown.classList.add("show");
            this.userDropdown.style.display = "block";
            this.isDropdownOpen = true;

            this.userBtn.classList.add("dropdown-active");
          }
        }

        closeDropdown() {
          if (this.userDropdown && this.isDropdownOpen) {
            this.userDropdown.classList.remove("show");
            this.userDropdown.style.display = "none";
            this.isDropdownOpen = false;
            this.userBtn.classList.remove("dropdown-active");
          }
        }

        closeAllOtherDropdowns() {
          document
            .querySelectorAll(".user-dropdown.show")
            .forEach((dropdown) => {
              if (dropdown !== this.userDropdown) {
                dropdown.classList.remove("show");
                dropdown.style.display = "none";
              }
            });

          document
            .querySelectorAll(".user-btn.dropdown-active")
            .forEach((btn) => {
              if (btn !== this.userBtn) {
                btn.classList.remove("dropdown-active");
              }
            });
        }

        calculateDropdownPosition() {
          if (!this.userDropdown || !this.userBtn) return;

          const btnRect = this.userBtn.getBoundingClientRect();
          const navbarRect = document
            .getElementById("navBar")
            .getBoundingClientRect();

          if (window.innerWidth > 768) {
            this.userDropdown.style.position = "fixed";
            this.userDropdown.style.top = `${navbarRect.bottom + 5}px`;
            this.userDropdown.style.right = `${
              window.innerWidth - btnRect.right
            }px`;
          } else {
            this.userDropdown.style.position = "fixed";
            this.userDropdown.style.top = `${navbarRect.bottom + 5}px`;
            this.userDropdown.style.left = "10px";
            this.userDropdown.style.right = "10px";
            this.userDropdown.style.width = "auto";
          }
        }

        checkLoginStatus() {
          const userLoggedIn = localStorage.getItem("userLoggedIn");
          if (userLoggedIn === "true") {
            this.isLoggedIn = true;
            const userData = JSON.parse(
              localStorage.getItem("userData") || "{}"
            );
            if (this.userAvatar) {
              this.userAvatar.textContent = userData.avatarInitial || "?";
            }
            if (this.userName) {
              this.userName.textContent = userData.name || "Usuário";
            }
          } else {
            this.isLoggedIn = false;
            if (this.userAvatar) {
              this.userAvatar.textContent = "?";
            }
            if (this.userName) {
              this.userName.textContent = "Entrar";
            }
          }
        }

        openLoginModal() {
          const loginModal = document.getElementById("loginModal");
          if (loginModal) {
            this.closeDropdown();
            loginModal.style.display = "flex";
            loginModal.style.zIndex = "1300";
          }
        }

        openRegisterModal() {
          const registerModal = document.getElementById("registerModal");
          if (registerModal) {
            this.closeDropdown();
            registerModal.style.display = "flex";
            registerModal.style.zIndex = "1300";
          }
        }
      }

      // ========== GERENCIADOR DO CARROSSEL DE BACKGROUND (DO INDEX) ==========
      class BackgroundCarouselManager {
        constructor() {
          this.images = [
            "https://images.unsplash.com/photo-1674469772804-2eb035c8738b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MzF8fGFmcm9icmFzaWxpYW58ZW58MHx8MHx8fDA%3D",
            "https://plus.unsplash.com/premium_photo-1710380800121-099195937629?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTN8fGNhcG9laXJhfGVufDB8fDB8fHww",
            "https://images.unsplash.com/photo-1545692770-f0029a91f3ba?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8ZmF2ZWxhfGVufDB8fDB8fHww",
            "https://images.unsplash.com/photo-1622522867204-35b68cb3d200?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YmFoaWF8ZW58MHx8MHx8fDA%3D",
            "https://images.unsplash.com/photo-1581475319737-4ae69b8926c7?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fGJhaGlhfGVufDB8fDB8fHww",
          ];
          this.currentIndex = 0;
          this.intervalId = null;
          this.slideInterval = 6000;
          this.container = document.getElementById("backgroundCarousel");
        }

        init() {
          this.initializeSlides();
          this.startAutoSlide();
        }

        initializeSlides() {
          if (!this.container) return;

          this.images.forEach((url, index) => {
            const slide = document.createElement("div");
            slide.className = "carousel-slide";
            if (index === 0) slide.classList.add("active");

            slide.style.backgroundImage = `url('${url}')`;

            slide.onerror = function () {
              this.style.backgroundImage = `url('https://placehold.co/1920x1080/374151/ffffff?text=Cultura+Afro-Brasileira+${
                index + 1
              }')`;
            };

            this.container.appendChild(slide);
          });
        }

        showSlide(index) {
          const slides = this.container.querySelectorAll(".carousel-slide");

          slides.forEach((slide) => slide.classList.remove("active"));

          if (slides[index]) {
            slides[index].classList.add("active");
          }
        }

        changeSlide(step) {
          let newIndex = this.currentIndex + step;

          if (newIndex >= this.images.length) {
            newIndex = 0;
          } else if (newIndex < 0) {
            newIndex = this.images.length - 1;
          }

          this.currentIndex = newIndex;
          this.showSlide(this.currentIndex);
        }

        startAutoSlide() {
          this.intervalId = setInterval(() => {
            this.changeSlide(1);
          }, this.slideInterval);
        }
      }

      // ========== GERENCIADOR DA BIBLIOTECA ==========
      class BibliotecaManager {
        constructor() {
          this.libraryItems = [];
          this.currentPage = 1;
          this.itemsPerPage = 6;
          this.filteredItems = [...this.libraryItems];
          this.pdfFiles = [];

          // Carregar itens do localStorage ou iniciar com dados de exemplo
          this.loadItems();
        }

        async loadPDFsFromFolder() {
          try {
            // Em um sistema real, você faria uma requisição para o servidor
            // Para protótipo, vamos usar uma lista simulada

            // Lista de PDFs que você tem na pasta
            const samplePDFs = [
              "historia_afro_brasileira.pdf",
              "cultura_afro_brasileira.pdf",
              "musica_africana.pdf",
              "culinaria_africana.pdf",
              "religiao_afro.pdf",
              "arte_contemporanea.pdf",
              "literatura_afro.pdf",
              "ciencias_sociais.pdf",
            ];

            this.pdfFiles = samplePDFs;

            // Atualizar o select de PDFs
            const pdfSelect = document.getElementById("pdfSelect");
            if (pdfSelect) {
              pdfSelect.innerHTML =
                '<option value="">Selecione um PDF</option>';

              this.pdfFiles.forEach((pdf) => {
                const option = document.createElement("option");
                option.value = pdf;
                option.textContent = pdf.replace(/_/g, " ").replace(".pdf", "");
                pdfSelect.appendChild(option);
              });
            }

            return this.pdfFiles;
          } catch (error) {
            console.error("Erro ao carregar PDFs:", error);
            return [];
          }
        }

        loadItems() {
          const savedItems = localStorage.getItem("bibliotecaItems");
          if (savedItems) {
            this.libraryItems = JSON.parse(savedItems);
            this.filteredItems = [...this.libraryItems];

            // Se não houver itens, adicionar alguns exemplos
            if (this.libraryItems.length === 0) {
              this.initializeSampleData();
            }
          } else {
            this.initializeSampleData();
          }
        }

        initializeSampleData() {
          const sampleItems = [
            {
              id: 1,
              title: "História Afro-Brasileira",
              author: "Ministério da Educação",
              description:
                "Material completo sobre a história da cultura afro-brasileira no Brasil.",
              type: "Livro",
              year: 2023,
              category: "historia",
              language: "Português",
              file: "historia_afro_brasileira.pdf",
              dateAdded: "2025-12-05",
            },
            {
              id: 2,
              title: "Música Africana Tradicional",
              author: "Canal Educação Cultural",
              description:
                "Documentário sobre os ritmos e instrumentos musicais tradicionais da África.",
              type: "Vídeo",
              year: 2021,
              category: "musica",
              language: "Português",
              file: "https://www.youtube.com/watch?v=exemplo_video_musica",
              dateAdded: "2025-12-05",
            },
            {
              id: 3,
              title: "Culinária Africana",
              author: "Chef Maria Silva",
              description:
                "Livro de receitas tradicionais africanas e sua influência na culinária brasileira.",
              type: "Livro",
              year: 2022,
              category: "culinaria",
              language: "Português",
              file: "culinaria_africana.pdf",
              dateAdded: "2025-12-05",
            },
          ];

          this.libraryItems = sampleItems;
          this.filteredItems = [...this.libraryItems];
          this.saveItems();
        }

        saveItems() {
          localStorage.setItem(
            "bibliotecaItems",
            JSON.stringify(this.libraryItems)
          );
        }

        addItem(item) {
          this.libraryItems.unshift(item); // Adicionar no início
          this.filteredItems = [...this.libraryItems];
          this.saveItems();
          this.renderItems();
          this.updateStats();
        }

        init() {
          this.renderItems();
          this.setupEventListeners();
          this.checkUrlSearchParam();
          this.updateStats();
          this.loadPDFsFromFolder();
        }

        checkUrlSearchParam() {
          const urlParams = new URLSearchParams(window.location.search);
          const searchParam = urlParams.get("search");

          if (searchParam) {
            document.getElementById("searchInput").value = searchParam;
            this.performSearch();
          }
        }

        updateStats() {
          const books = this.libraryItems.filter(
            (item) => item.type === "Livro"
          ).length;
          const articles = this.libraryItems.filter(
            (item) => item.type === "Artigo"
          ).length;
          const videos = this.libraryItems.filter(
            (item) => item.type === "Vídeo"
          ).length;
          const references = this.libraryItems.filter(
            (item) => item.type === "Material de Referência"
          ).length;

          const statItems = document.querySelectorAll(".stat-item");
          if (statItems.length >= 4) {
            statItems[0].textContent = `Livros: ${books}`;
            statItems[1].textContent = `Artigos: ${articles}`;
            statItems[2].textContent = `Vídeos: ${videos}`;
            statItems[3].textContent = `Materiais: ${references}`;
          }
        }

        setupEventListeners() {
          document
            .getElementById("searchButton")
            .addEventListener("click", () => this.performSearch());
          document
            .getElementById("searchInput")
            .addEventListener("keyup", (event) => {
              if (event.key === "Enter") {
                this.performSearch();
              }
            });

          document
            .getElementById("categoryFilter")
            .addEventListener("change", () => this.applyFilters());

          document
            .querySelectorAll(".filter-option input")
            .forEach((checkbox) => {
              checkbox.addEventListener("change", () => this.applyFilters());
            });

          document
            .getElementById("sortSelect")
            .addEventListener("change", () => this.applySorting());
        }

        performSearch() {
          const searchTerm = document
            .getElementById("searchInput")
            .value.toLowerCase();

          if (searchTerm.trim() === "") {
            this.filteredItems = [...this.libraryItems];
            this.applySorting();
            return;
          }

          this.filteredItems = this.libraryItems.filter((item) => {
            const titleMatch = item.title.toLowerCase().includes(searchTerm);
            const authorMatch = item.author.toLowerCase().includes(searchTerm);
            const descMatch = item.description
              .toLowerCase()
              .includes(searchTerm);

            const searchWords = searchTerm.split(" ");
            let wordMatch = false;

            if (searchWords.length > 1) {
              wordMatch = searchWords.some(
                (word) =>
                  item.title.toLowerCase().includes(word) ||
                  item.author.toLowerCase().includes(word) ||
                  item.description.toLowerCase().includes(word)
              );
            }

            return titleMatch || authorMatch || descMatch || wordMatch;
          });

          this.filteredItems.sort((a, b) => {
            const aTitleMatch = a.title.toLowerCase().includes(searchTerm);
            const bTitleMatch = b.title.toLowerCase().includes(searchTerm);

            if (aTitleMatch && !bTitleMatch) return -1;
            if (!aTitleMatch && bTitleMatch) return 1;

            const aAuthorMatch = a.author.toLowerCase().includes(searchTerm);
            const bAuthorMatch = b.author.toLowerCase().includes(searchTerm);

            if (aAuthorMatch && !bAuthorMatch) return -1;
            if (!aAuthorMatch && bAuthorMatch) return 1;

            return 0;
          });

          this.currentPage = 1;
          this.renderItems();

          if (this.filteredItems.length === 0) {
            this.showNoResultsMessage(searchTerm);
          }
        }

        showNoResultsMessage(searchTerm) {
          const itemsGrid = document.getElementById("itemsGrid");
          const noResultsDiv = document.createElement("div");
          noResultsDiv.className = "empty-state";
          noResultsDiv.innerHTML = `
                    <i class="fas fa-search"></i>
                    <h3>Nenhum resultado encontrado</h3>
                    <p>Não encontramos materiais relacionados à pesquisa: "<strong>${searchTerm}</strong>"</p>
                    <p style="margin-top: 15px; font-size: 0.9rem;">
                        Sugestões:
                        <br>• Verifique a ortografia
                        <br>• Tente termos mais gerais
                        <br>• Explore nossas categorias
                    </p>
                `;

          itemsGrid.innerHTML = "";
          itemsGrid.appendChild(noResultsDiv);

          document.getElementById("pagination").style.display = "none";

          document.getElementById("resultsCount").textContent =
            "Nenhum resultado encontrado";
        }

        applyFilters() {
          const searchTerm = document
            .getElementById("searchInput")
            .value.toLowerCase();
          const categoryFilter =
            document.getElementById("categoryFilter").value;

          const selectedTypes = [];
          if (document.getElementById("filter-book").checked)
            selectedTypes.push("Livro");
          if (document.getElementById("filter-article").checked)
            selectedTypes.push("Artigo");
          if (document.getElementById("filter-video").checked)
            selectedTypes.push("Vídeo");
          if (document.getElementById("filter-reference").checked)
            selectedTypes.push("Material de Referência");

          const selectedYears = [];
          if (document.getElementById("filter-year-2020").checked)
            selectedYears.push("2020");
          if (document.getElementById("filter-year-2010").checked)
            selectedYears.push("2010");
          if (document.getElementById("filter-year-2000").checked)
            selectedYears.push("2000");
          if (document.getElementById("filter-year-1990").checked)
            selectedYears.push("1990");
          if (document.getElementById("filter-year-older").checked)
            selectedYears.push("older");

          const selectedLanguages = [];
          if (document.getElementById("filter-lang-pt").checked)
            selectedLanguages.push("Português");
          if (document.getElementById("filter-lang-en").checked)
            selectedLanguages.push("Inglês");
          if (document.getElementById("filter-lang-es").checked)
            selectedLanguages.push("Espanhol");
          if (document.getElementById("filter-lang-fr").checked)
            selectedLanguages.push("Francês");

          this.filteredItems = this.libraryItems.filter((item) => {
            const matchesSearch =
              !searchTerm ||
              item.title.toLowerCase().includes(searchTerm) ||
              item.author.toLowerCase().includes(searchTerm) ||
              item.description.toLowerCase().includes(searchTerm);

            const matchesCategory =
              !categoryFilter || item.category === categoryFilter;

            const matchesType =
              selectedTypes.length === 0 || selectedTypes.includes(item.type);

            let matchesYear = selectedYears.length === 0;
            if (!matchesYear) {
              for (const yearRange of selectedYears) {
                if (yearRange === "2020" && item.year >= 2020)
                  matchesYear = true;
                if (
                  yearRange === "2010" &&
                  item.year >= 2010 &&
                  item.year < 2020
                )
                  matchesYear = true;
                if (
                  yearRange === "2000" &&
                  item.year >= 2000 &&
                  item.year < 2010
                )
                  matchesYear = true;
                if (
                  yearRange === "1990" &&
                  item.year >= 1990 &&
                  item.year < 2000
                )
                  matchesYear = true;
                if (yearRange === "older" && item.year < 1990)
                  matchesYear = true;
              }
            }

            const matchesLanguage =
              selectedLanguages.length === 0 ||
              selectedLanguages.includes(item.language);

            return (
              matchesSearch &&
              matchesCategory &&
              matchesType &&
              matchesYear &&
              matchesLanguage
            );
          });

          this.applySorting();
        }

        applySorting() {
          const sortValue = document.getElementById("sortSelect").value;

          switch (sortValue) {
            case "title":
              this.filteredItems.sort((a, b) => a.title.localeCompare(b.title));
              break;
            case "title-desc":
              this.filteredItems.sort((a, b) => b.title.localeCompare(a.title));
              break;
            case "date":
              this.filteredItems.sort((a, b) => b.year - a.year);
              break;
            case "date-old":
              this.filteredItems.sort((a, b) => a.year - b.year);
              break;
            case "relevance":
            default:
              break;
          }

          this.currentPage = 1;
          this.renderItems();
        }

        renderItems() {
          const itemsGrid = document.getElementById("itemsGrid");
          const pagination = document.getElementById("pagination");
          const resultsCount = document.getElementById("resultsCount");

          const startIndex = (this.currentPage - 1) * this.itemsPerPage;
          const endIndex = startIndex + this.itemsPerPage;
          const currentItems = this.filteredItems.slice(startIndex, endIndex);

          if (this.filteredItems.length === 0) {
            resultsCount.textContent = "Nenhum item encontrado";
          } else {
            resultsCount.textContent = `Mostrando ${Math.min(
              currentItems.length,
              this.itemsPerPage
            )} de ${this.filteredItems.length} resultados`;
          }

          itemsGrid.innerHTML = "";

          if (this.filteredItems.length === 0) {
            const emptyState = document.createElement("div");
            emptyState.className = "empty-state";
            emptyState.innerHTML = `
                        <i class="fas fa-inbox"></i>
                        <h3>${
                          this.libraryItems.length === 0
                            ? "Biblioteca Vazia"
                            : "Nenhum Resultado"
                        }</h3>
                        <p>${
                          this.libraryItems.length === 0
                            ? 'Nenhum item foi adicionado à biblioteca ainda. Clique em "Adicionar Conteúdo" para começar.'
                            : "Nenhum item corresponde aos critérios de busca e filtros selecionados. Tente ajustar os filtros."
                        }</p>
                    `;
            itemsGrid.appendChild(emptyState);

            pagination.style.display = "none";
          } else {
            currentItems.forEach((item) => {
              const itemCard = document.createElement("div");
              itemCard.className = "item-card";

              let iconClass = "fa-book";
              let iconColor = "#A55734";
              if (item.type === "Artigo") {
                iconClass = "fa-file-alt";
                iconColor = "#1E3A5F";
              } else if (item.type === "Vídeo") {
                iconClass = "fa-film";
                iconColor = "#6F2626";
              } else if (item.type === "Material de Referência") {
                iconClass = "fa-book-open";
                iconColor = "#4B5320";
              }

              itemCard.innerHTML = `
                            <div class="item-image" style="background: ${iconColor};">
                                <i class="fas ${iconClass}"></i>
                            </div>
                            <div class="item-content">
                                <span class="item-type">${item.type}</span>
                                <h3 class="item-title">${item.title}</h3>
                                <p class="item-author">por ${item.author}</p>
                                <p class="item-description">${
                                  item.description
                                }</p>
                                <div class="item-meta">
                                    <span>${item.year}</span>
                                    <span>${item.language}</span>
                                </div>
                                <div class="item-actions">
                                    <button class="action-btn view-btn" data-id="${
                                      item.id
                                    }">
                                        <i class="fas fa-eye"></i> ${
                                          item.type === "Vídeo"
                                            ? "Assistir"
                                            : "Visualizar"
                                        }
                                    </button>
                                    <button class="action-btn save-btn" data-id="${
                                      item.id
                                    }">
                                        <i class="fas fa-bookmark"></i> Salvar
                                    </button>
                                </div>
                            </div>
                        `;

              itemsGrid.appendChild(itemCard);
            });

            // Adicionar eventos aos botões
            itemsGrid.querySelectorAll(".view-btn").forEach((btn) => {
              btn.addEventListener("click", (e) => {
                const itemId = parseInt(
                  e.target.closest(".view-btn").dataset.id
                );
                this.viewItem(itemId);
              });
            });

            itemsGrid.querySelectorAll(".save-btn").forEach((btn) => {
              btn.addEventListener("click", (e) => {
                const itemId = parseInt(
                  e.target.closest(".save-btn").dataset.id
                );
                this.saveItem(itemId);
              });
            });

            pagination.style.display = "flex";
            this.renderPagination();
          }
        }

        viewItem(itemId) {
          const item = this.libraryItems.find((item) => item.id === itemId);
          if (!item) return;

          if (item.type === "Vídeo") {
            // Abrir link do YouTube
            if (
              item.file.includes("youtube.com") ||
              item.file.includes("youtu.be")
            ) {
              window.open(item.file, "_blank");
            } else {
              alert("Este é um vídeo. Em produção, abriria o link do YouTube.");
            }
          } else {
            // Para PDFs, abrir da pasta
            const pdfPath = `public/assets/biblioteca/pdfs/${item.file}`;

            // Verificar se é um link (para compatibilidade)
            if (item.file.startsWith("http")) {
              window.open(item.file, "_blank");
            } else {
              // Tenta abrir o PDF
              window.open(pdfPath, "_blank");
            }
          }
        }

        saveItem(itemId) {
          const item = this.libraryItems.find((item) => item.id === itemId);
          if (!item) return;

          // Salvar no localStorage
          let savedItems = JSON.parse(
            localStorage.getItem("savedItems") || "[]"
          );

          if (!savedItems.find((saved) => saved.id === itemId)) {
            savedItems.push(item);
            localStorage.setItem("savedItems", JSON.stringify(savedItems));
            alert(`"${item.title}" foi salvo em seus favoritos!`);
          } else {
            alert(`"${item.title}" já está em seus favoritos!`);
          }
        }

        renderPagination() {
          const pagination = document.getElementById("pagination");
          const totalPages = Math.ceil(
            this.filteredItems.length / this.itemsPerPage
          );

          pagination.innerHTML = "";

          const prevButton = document.createElement("button");
          prevButton.className = "page-btn";
          prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
          prevButton.disabled = this.currentPage === 1;
          prevButton.addEventListener("click", () => {
            if (this.currentPage > 1) {
              this.currentPage--;
              this.renderItems();
            }
          });
          pagination.appendChild(prevButton);

          const maxVisiblePages = 5;
          let startPage = Math.max(
            1,
            this.currentPage - Math.floor(maxVisiblePages / 2)
          );
          let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

          if (endPage - startPage + 1 < maxVisiblePages) {
            startPage = Math.max(1, endPage - maxVisiblePages + 1);
          }

          if (startPage > 1) {
            const firstPageButton = document.createElement("button");
            firstPageButton.className = "page-btn";
            firstPageButton.textContent = "1";
            firstPageButton.addEventListener("click", () => {
              this.currentPage = 1;
              this.renderItems();
            });
            pagination.appendChild(firstPageButton);

            if (startPage > 2) {
              const dots = document.createElement("span");
              dots.className = "page-dots";
              dots.textContent = "...";
              pagination.appendChild(dots);
            }
          }

          for (let i = startPage; i <= endPage; i++) {
            const pageButton = document.createElement("button");
            pageButton.className = `page-btn ${
              i === this.currentPage ? "active" : ""
            }`;
            pageButton.textContent = i;
            pageButton.addEventListener("click", () => {
              this.currentPage = i;
              this.renderItems();
            });
            pagination.appendChild(pageButton);
          }

          if (endPage < totalPages) {
            if (endPage < totalPages - 1) {
              const dots = document.createElement("span");
              dots.className = "page-dots";
              dots.textContent = "...";
              pagination.appendChild(dots);
            }

            const lastPageButton = document.createElement("button");
            lastPageButton.className = "page-btn";
            lastPageButton.textContent = totalPages;
            lastPageButton.addEventListener("click", () => {
              this.currentPage = totalPages;
              this.renderItems();
            });
            pagination.appendChild(lastPageButton);
          }

          const nextButton = document.createElement("button");
          nextButton.className = "page-btn";
          nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
          nextButton.disabled = this.currentPage === totalPages;
          nextButton.addEventListener("click", () => {
            if (this.currentPage < totalPages) {
              this.currentPage++;
              this.renderItems();
            }
          });
          pagination.appendChild(nextButton);
        }
      }

      // ========== INICIALIZAÇÃO DO APLICATIVO ==========
      document.addEventListener("DOMContentLoaded", () => {
        const app = new BibliotecaApp();
      });
    </script>
  </body>
</html>
